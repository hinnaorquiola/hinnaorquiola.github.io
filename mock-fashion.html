<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hinna Studio ‚Äî Timeless Collection</title>
  <meta name="description" content="Hinna Studio ‚Äî Timeless pieces, effortless style. Editorial portfolio & shop.">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Fonts chosen to match the PDF editorial aesthetic -->
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{
      --paper:#FAF8F4;       /* soft paper */
      --dark-brown:#542318; /* primary */
      --olive:#4B4A2E;      /* accent */
      --tan:#B07A4F;        /* accent */
      --muted:#6b635b;
      --white:#ffffff;
      --max-width:1200px;
    }
    /* reset & base */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--dark-brown);
      background:var(--paper);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.65;
      font-size:16px;
    }
    a{color:inherit}
    .site{max-width:var(--max-width);margin:0 auto;padding:0 28px}

    /* NAV ‚Äî centered, minimal like the PDF header */
    nav.top{
      position:fixed;left:0;right:0;top:20px;z-index:1400;pointer-events:none;
      display:flex;justify-content:center;
    }
    .nav-inner{
      pointer-events:auto;
      width:100%;max-width:var(--max-width);
      display:flex;justify-content:space-between;align-items:center;padding:0 24px;
      gap:12px;
    }
    .brand{display:flex;align-items:center;gap:14px;text-decoration:none;color:var(--dark-brown)}
    .brand .logo{
      width:44px;height:44px;border-radius:6px;background:transparent;border:1px solid rgba(0,0,0,0.06);
      display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--dark-brown);
      font-family:"Libre Baskerville",serif;font-size:20px;
    }
    .nav-links{display:flex;gap:20px;align-items:center}
    .nav-links a{font-weight:600;letter-spacing:0.6px;color:var(--muted);text-decoration:none}
    .nav-actions{display:flex;align-items:center;gap:10px}
    .cart-btn{background:var(--white);border-radius:999px;padding:8px 10px;border:1px solid #eee;cursor:pointer;font-weight:700}
    .cart-count{background:var(--dark-brown);color:#fff;padding:2px 6px;border-radius:999px;font-size:0.8rem;margin-left:-8px}

   /* === Hero Section (Fashion Collection) === */
.hero-section{
  display:grid;
  grid-template-columns:1fr 480px;
  align-items:center;
  gap:40px;
  background:#f4eadf;           /* beige paper tone */
  padding:80px 6%;
  min-height:90vh;
}
.hero-text h1{
  font-family:"Playfair Display",serif;
  font-size:clamp(52px,7vw,100px);
  font-weight:700;
  color:#7d1506;                 /* deep red-brown */
  line-height:0.95;
  position:relative;
  display:inline-block;
}
.hero-text h1 span{
  position:absolute;
  left:0;
  bottom:-18%;
  font-family:"Dancing Script",cursive;
  font-size:0.55em;
  color:#111;
  transform:translateY(40%);
}
.hero-text p{
  margin-top:140px;
  font-family:"Inter",sans-serif;
  color:#111;
  font-size:1.05rem;
  letter-spacing:0.4px;
  max-width:460px;
}

/* Portrait image */
.hero-img{
  width:100%;
  height:auto;
  overflow:hidden;
}
.hero-img img{
  width:100%;
  height:auto;
  object-fit:cover;
  display:block;
}

/* Responsive */
@media(max-width:900px){
  .hero-section{
    grid-template-columns:1fr;
    padding:60px 8%;
    text-align:center;
  }
  .hero-text h1{
    font-size:clamp(48px,9vw,80px);
  }
  .hero-text h1 span{
    position:relative;
    display:block;
    transform:none;
    bottom:auto;
    margin-top:-18px;
  }
  .hero-text p{
    margin-top:24px;
    margin-left:auto;
    margin-right:auto;
  }
  .hero-img{
    margin-top:40px;
  }
}

    /* Section headings styled like PDF */
    h2.section-title{
      font-family:"Libre Baskerville",serif;font-size:28px;margin:0 0 8px;letter-spacing:1px;color:var(--dark-brown)
    }
    p.section-sub{color:var(--muted);margin:0 0 28px;max-width:820px}

    /* Lookbook / product grid ‚Äî editorial two-column cards with portrait photos */
    .lookbook{
      display:grid;gap:28px;grid-template-columns:1fr; /* one column of rows that contain two-col cards */
    }
    .product-row{
      display:grid;grid-template-columns:420px 1fr;gap:28px;align-items:center;background:transparent;padding:12px 0;border-bottom:1px solid rgba(0,0,0,0.03)
    }
    .product-photo{height:640px;overflow:hidden}
    .product-photo img{width:100%;height:100%;object-fit:cover;display:block}
    .product-meta{padding:0 12px}
    .product-meta h4{margin:0;font-family:"Libre Baskerville",serif;font-size:22px;color:var(--dark-brown)}
    .product-meta .price{color:var(--muted);font-weight:600;margin-top:6px}
    .product-meta .desc{color:var(--muted);margin-top:12px;max-width:520px}

    /* About section converted to editorial spread using portrait2.webp */
    .about-grid{display:grid;grid-template-columns:420px 1fr;gap:32px;align-items:center;padding-top:6px}
    .about-img{overflow:hidden;height:720px}
    .about-img img{width:100%;height:100%;object-fit:cover;display:block}
    .about-text h3{font-family:"Libre Baskerville",serif;margin-top:0;font-size:28px}
    .muted{color:var(--muted)}

    /* Contact / small panels */
    .contact-panel{
      background:transparent;padding:22px;border-radius:6px;display:flex;gap:24px;align-items:center;justify-content:space-between;flex-wrap:wrap;
      border-top:2px solid var(--tan);
    }

    /* modal & drawer same as original but restyled buttons */
    .drawer{position:fixed;right:0;top:0;height:100vh;width:360px;background:var(--white);box-shadow:-28px 0 60px rgba(16,12,10,0.08);transform:translateX(110%);transition:transform .35s;z-index:1500;display:flex;flex-direction:column}
    .drawer.open{transform:translateX(0)}
    .drawer .head{padding:20px;border-bottom:1px solid #f1eeea;display:flex;justify-content:space-between;align-items:center}
    .modal{position:fixed;inset:0;background:rgba(11,8,6,0.55);display:none;align-items:center;justify-content:center;padding:24px;z-index:1400}
    .modal.open{display:flex}
    .sheet{background:var(--white);border-radius:8px;max-width:920px;width:100%;overflow:hidden;display:flex;gap:0;box-shadow:0 30px 80px rgba(16,12,10,0.15)}
    .sheet .left{flex:1 1 50%}
    .sheet .right{flex:1 1 50%;padding:28px}
    .close-btn{position:absolute;right:18px;top:18px;background:var(--white);border-radius:50%;border:none;padding:6px;cursor:pointer;box-shadow:0 6px 22px rgba(0,0,0,0.06)}

    footer{padding:36px 0;text-align:center;color:var(--muted);font-size:0.95rem}

    /* Responsive adjustments */
    @media (max-width:1120px){
      .hero-wrapper{grid-template-columns:1fr;gap:28px}
      .hero-image{height:640px}
      .about-grid{grid-template-columns:1fr}
      .product-row{grid-template-columns:1fr;gap:18px}
      .product-photo{height:520px}
    }
    @media (max-width:680px){
      .nav-links{display:none}
      .hero h1{font-size:clamp(36px,8.5vw,58px)}
      .hero-image{height:520px}
      .product-photo{height:420px}
    }

    /* small utility */
    .muted-small{color:var(--muted);font-size:0.95rem}
    .divider{height:4px;width:120px;background:var(--tan);margin-top:10px}
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="top" role="navigation" aria-label="Main navigation">
    <div class="nav-inner site">
      <a class="brand" href="#home" onclick="scrollToSection(event,'home')">
        <div class="logo">H</div>
        <div style="color:var(--dark-brown)">
          <div style="font-family:'Libre Baskerville',serif;font-weight:700">Hinna Studio</div>
          <div style="font-size:12px;color:var(--muted)">Editorial & Atelier</div>
        </div>
      </a>

      <div class="nav-links" aria-hidden="false">
        <a href="#home" onclick="scrollToSection(event,'home')">Home</a>
        <a href="#collection" onclick="scrollToSection(event,'collection')">Collection</a>
        <a href="#about" onclick="scrollToSection(event,'about')">About</a>
        <a href="#contact" onclick="scrollToSection(event,'contact')">Contact</a>
      </div>

      <div class="nav-actions">
        <button class="cart-btn" id="openCart" title="Open cart">üëú <span class="cart-count" id="cartCount">0</span></button>
      </div>
    </div>
  </nav>

 <!-- === HERO HTML === -->
<section class="hero-section" id="home">
  <div class="hero-text">
    <h1>Fashion <span>Collection</span></h1>
    <p>Timeless pieces. A quiet, intentional wardrobe designed to last.</p>
  </div>
  <div class="hero-img">
    <img src="https://hinnaorquiola.github.io/images/portrait2.webp" alt="Fashion portrait">
  </div>
</section>

  <!-- MAIN -->
  <main>

    <!-- Featured / Collection (each product shown as editorial row with portrait image) -->
    <section id="collection" aria-labelledby="collectionTitle">
      <div class="section-inner site">
        <header style="display:flex;align-items:baseline;justify-content:space-between;gap:12px;margin-bottom:18px">
          <div>
            <h2 id="collectionTitle" class="section-title">Featured Collection</h2>
            <p class="section-sub muted">A curated selection of wardrobe essentials ‚Äî crafted for longevity and quiet confidence.</p>
          </div>
          <div style="align-self:center;color:var(--muted);font-size:0.95rem">Spring ‚Ä¢ 2025</div>
        </header>

        <div class="lookbook" id="productGrid" aria-live="polite">
          <!-- product rows will be injected by JS using existing PRODUCTS array -->
        </div>
      </div>
    </section>

    <!-- About / Editorial Spread -->
    <section id="about" aria-labelledby="aboutTitle">
      <div class="section-inner site" style="padding-top:6px">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:24px;margin-bottom:18px;flex-wrap:wrap">
          <div>
            <h2 id="aboutTitle" class="section-title">About Hinna Studio</h2>
            <p class="section-sub muted">We design with an editorial eye and an ethical heart ‚Äî minimal silhouettes, premium materials, and considered details.</p>
          </div>
          <div style="border-top:2px solid var(--tan);width:120px;height:4px;margin-top:8px"></div>
        </div>

        <div class="about-grid">
          <div class="about-img">
            <img src="https://hinnaorquiola.github.io/images/portrait2.webp" alt="About portrait">
          </div>
          <div class="about-text">
            <h3>Signature Style</h3>
            <p class="muted">Hinna Studio brings a minimalist wardrobe to modern life ‚Äî refined tailoring, soft textures, and palettes that age beautifully. Our pieces are designed to be mixed, layered, and loved for seasons.</p>

            <div style="display:flex;gap:14px;margin-top:18px;flex-wrap:wrap">
              <div style="min-width:160px">
                <strong>Material</strong>
                <p class="muted" style="margin:6px 0 0">Linen, organic cotton, recycled blends.</p>
              </div>
              <div style="min-width:160px">
                <strong>Care</strong>
                <p class="muted" style="margin:6px 0 0">Low-impact dyes, gentle washes.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials & Contact -->
    <section id="contact" aria-labelledby="contactTitle">
      <div class="section-inner site">
        <div style="display:flex;gap:24px;align-items:flex-start;flex-wrap:wrap">
          <div style="flex:1;min-width:320px">
            <h2 id="contactTitle" class="section-title">Contact</h2>
            <p class="section-sub muted">Press, wholesale inquiries, or custom commissions ‚Äî send us a message and we'll respond within 2 business days.</p>

            <div class="contact-panel" style="margin-top:18px">
              <div style="flex:1;min-width:220px">
                <div style="font-weight:700">Hinna Studio</div>
                <div class="muted" style="margin-top:6px">hello@hinnastudio.example</div>
                <div class="muted" style="margin-top:4px">+63 912 345 6789</div>
                <div class="muted" style="margin-top:6px">Tacloban City, Philippines</div>
              </div>
              <form id="newsletterForm" style="min-width:220px" onsubmit="event.preventDefault(); alert('Thanks! (this is a mock)')">
                <label style="display:block;font-weight:600;margin-bottom:8px">Join our style circle</label>
                <div style="display:flex;gap:8px">
                  <input type="email" required placeholder="Email address" style="padding:10px 12px;border-radius:999px;border:1px solid #e6e2dd;flex:1">
                  <button class="btn" style="border-radius:999px">Subscribe</button>
                </div>
              </form>
            </div>
          </div>

          <div style="flex:0 0 320px;min-width:260px">
            <h3 style="margin-top:0;font-family:'Libre Baskerville',serif">What clients say</h3>
            <blockquote style="margin:0;color:var(--muted)">‚ÄúThe quality is unmatched. Every piece feels tailored just for me.‚Äù ‚Äî Maya S.</blockquote>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer>
    <div class="site">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div>¬© 2025 Hinna Studio ‚Äî Designed by Hinna Orquiola</div>
        <div class="muted">This demo includes a mock cart and example checkout hooks for Stripe/PayPal integration.</div>
      </div>
    </div>
  </footer>

  <!-- PRODUCT MODAL (kept from your original file) -->
  <div class="modal" id="productModal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" id="sheet">
      <div class="left"><img id="modalImage" alt=""></div>
      <div class="right">
        <button class="close-btn" id="closeModal" aria-label="Close">‚úï</button>
        <h3 id="modalTitle" style="margin-top:8px"></h3>
        <p id="modalDesc" class="muted"></p>
        <p style="font-weight:700;margin:14px 0" id="modalPrice"></p>
        <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
          <label>Qty</label>
          <input id="modalQty" type="number" value="1" min="1" style="width:70px;padding:6px;border-radius:6px;border:1px solid #ddd">
        </div>
        <div style="margin-top:18px;display:flex;gap:12px">
          <button id="addToCart" class="btn" style="background:var(--tan);border:none;color:#111">Add to cart</button>
          <button id="buyNow" class="btn" style="background:#fff;border:1px solid #eee;color:var(--dark-brown)">Buy now</button>
        </div>
      </div>
    </div>
  </div>

  <!-- CART DRAWER -->
  <aside class="drawer" id="cartDrawer" aria-hidden="true">
    <div class="head"><strong>Your Cart</strong><button id="closeCartDrawer" style="background:none;border:none;font-size:18px;cursor:pointer">‚úï</button></div>
    <div class="items" id="cartItems"></div>
    <div class="checkout">
      <div style="display:flex;justify-content:space-between;margin-bottom:12px"><span class="muted">Subtotal</span><strong id="cartSubtotal">$0.00</strong></div>
      <div style="display:flex;gap:8px">
        <button id="checkoutReal" style="flex:1;padding:10px;border-radius:8px;border:none;background:var(--dark-brown);color:#fff;font-weight:700">Checkout (Real)</button>
        <button id="checkoutMock" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd;background:#fff">Mock Pay</button>
      </div>
      <p class="muted" style="font-size:12px;margin-top:10px">Real checkout uses Stripe server (example server provided). Mock Pay simulates checkout locally.</p>
    </div>
  </aside>

<script>
/* ============================
   Product data (unchanged)
   ============================ */
const PRODUCTS = [
  { id: "p1", title: "Classic Linen Shirt", price: 39.00, img: "https://img-1.kwcdn.com/thumbnail/s/a9653bcd4032e4d93a79e072ffae7a09_2b51fdcecf7f.jpg", desc: "Lightweight linen shirt. Breathable, natural fibers." },
  { id: "p2", title: "High-Waist Trousers", price: 45.00, img: "https://img.kwcdn.com/product/fancy/9f0641c7-d49c-4ffe-9e61-2d95dd4cc88e.jpg", desc: "Tailored high-waist trousers for everyday wear." },
  { id: "p3", title: "Minimalist Tote Bag", price: 29.00, img: "https://img.kwcdn.com/product/open/5907b2ad8eca43a4857d912b0f1682e3-goods.jpeg", desc: "Durable canvas tote with leather handles." },
  { id: "p4", title: "Structured Blazer", price: 69.00, img: "https://img.kwcdn.com/product/fancy/2ca2f0b9-864a-4645-bbd8-86dae5776e2a.jpg", desc: "Sharp blazer that keeps its shape." },
  { id: "p5", title: "Soft Knit Sweater", price: 42.00, img: "https://img.kwcdn.com/product/fancy/1285961b-7668-4afd-8939-4f17d0364a0b.jpg", desc: "Cozy sweater with sustainable fibers." },
  { id: "p6", title: "Everyday Denim", price: 55.00, img: "https://img.kwcdn.com/product/fancy/d84a8a8d-da2d-4c31-ac94-6e9f0643c8f0.jpg", desc: "Classic slim-fit denim with stretch." },
];

/* ===============
   Cart storage & helpers
   =============== */
let CART = JSON.parse(localStorage.getItem("hinna_cart") || "[]");
function saveCart(){ localStorage.setItem("hinna_cart", JSON.stringify(CART)); updateCartUI(); }
function addToCart(productId, qty=1){
  const p = PRODUCTS.find(x=>x.id===productId); if(!p) return;
  const exist = CART.find(i=>i.id===productId);
  if(exist) exist.qty += Number(qty);
  else CART.push({ id:productId, qty: Number(qty), title:p.title, price:p.price, img:p.img });
  saveCart();
}

/* ============
   Render products as editorial rows into lookbook
   ============ */
const productGrid = document.getElementById("productGrid");
PRODUCTS.forEach((p, idx)=>{
  const row = document.createElement("article");
  row.className = "product-row";
  // Use a portrait placeholder for the product image area ‚Äî if you'd like to use your portrait3 for specific product(s),
  // you can map them here; for now keep original product images inside the portrait frame for composition.
  row.innerHTML = `
    <div class="product-photo">
      <img loading="lazy" src="${p.img}" alt="${p.title}">
    </div>
    <div class="product-meta">
      <h4>${p.title}</h4>
      <div class="price">$${p.price.toFixed(2)}</div>
      <div class="desc">${p.desc}</div>
      <div style="margin-top:18px;display:flex;gap:12px">
        <button data-id="${p.id}" class="viewBtn" style="padding:10px 14px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer">View</button>
        <button data-id="${p.id}" class="quickAdd" style="padding:10px 14px;border-radius:8px;border:none;background:var(--tan);font-weight:700;cursor:pointer">Add</button>
      </div>
    </div>
  `;
  productGrid.appendChild(row);
});

/* --------------------
   Modal logic (product)
   -------------------- */
const modal = document.getElementById("productModal");
const closeModal = document.getElementById("closeModal");
const modalImage = document.getElementById("modalImage");
const modalTitle = document.getElementById("modalTitle");
const modalDesc = document.getElementById("modalDesc");
const modalPrice = document.getElementById("modalPrice");
const modalQty = document.getElementById("modalQty");
let currentProduct = null;

document.addEventListener("click", (e)=>{
  const v = e.target.closest(".viewBtn");
  if(v){ const id=v.dataset.id; openModal(id); }

  const q = e.target.closest(".quickAdd");
  if(q){ addToCart(q.dataset.id, 1); openDrawer(); }
});

function openModal(id){
  const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
  currentProduct = p;
  modalImage.src = p.img; modalTitle.textContent = p.title; modalDesc.textContent = p.desc; modalPrice.textContent = "$" + p.price.toFixed(2);
  modalQty.value = 1;
  modal.classList.add("open"); modal.setAttribute("aria-hidden","false");
}
closeModal.addEventListener("click", ()=>{ modal.classList.remove("open"); modal.setAttribute("aria-hidden","true"); });
modal.addEventListener("click", (e)=>{ if(e.target===modal) { closeModal.click(); } });

/* Add to cart from modal */
document.getElementById("addToCart").addEventListener("click", ()=>{
  const q = Number(modalQty.value || 1);
  addToCart(currentProduct.id, q);
  modal.classList.remove("open");
  openDrawer();
});

/* Buy Now (direct to checkout) */
document.getElementById("buyNow").addEventListener("click", async ()=>{
  const q = Number(modalQty.value || 1);
  addToCart(currentProduct.id, q);
  await startRealCheckout();
});

/* --------------------
   Drawer logic (cart)
   -------------------- */
const drawer = document.getElementById("cartDrawer");
const openCartBtn = document.getElementById("openCart");
const closeCartDrawer = document.getElementById("closeCartDrawer");
openCartBtn.addEventListener("click", openDrawer); closeCartDrawer.addEventListener("click", closeDrawer);
function openDrawer(){ drawer.classList.add("open"); drawer.setAttribute("aria-hidden","false"); updateCartUI(); }
function closeDrawer(){ drawer.classList.remove("open"); drawer.setAttribute("aria-hidden","true"); }

function updateCartUI(){
  const itemsEl = document.getElementById("cartItems");
  itemsEl.innerHTML = "";
  let subtotal = 0;
  CART.forEach(item=>{
    subtotal += item.price * item.qty;
    const row = document.createElement("div");
    row.className = "item";
    row.style.display = "flex"; row.style.gap = "12px"; row.style.padding = "12px 0"; row.style.borderBottom = "1px solid #f1eeea";
    row.innerHTML = `
      <img src="${item.img}" alt="${item.title}" style="width:72px;height:72px;object-fit:cover;border-radius:8px">
      <div style="flex:1">
        <div style="font-weight:600">${item.title}</div>
        <div class="muted" style="font-size:13px">$${item.price.toFixed(2)}</div>
        <div style="margin-top:8px;display:flex;align-items:center;gap:8px">
          <div style="display:flex;align-items:center;gap:8px">
            <button class="dec" data-id="${item.id}" style="width:32px;height:32px;border-radius:6px;border:1px solid #ddd;background:#fff;cursor:pointer">‚àí</button>
            <span style="padding:6px 10px;border:1px solid #eee;border-radius:8px">${item.qty}</span>
            <button class="inc" data-id="${item.id}" style="width:32px;height:32px;border-radius:6px;border:1px solid #ddd;background:#fff;cursor:pointer">+</button>
          </div>
          <button style="margin-left:12px;background:none;border:none;color:#b00;cursor:pointer" class="remove" data-id="${item.id}">Remove</button>
        </div>
      </div>
    `;
    itemsEl.appendChild(row);
  });
  document.getElementById("cartSubtotal").textContent = "$" + subtotal.toFixed(2);
  document.getElementById("cartCount").textContent = CART.reduce((s,i)=>s+i.qty,0);
  // attach listeners
  itemsEl.querySelectorAll(".inc").forEach(b=>b.addEventListener("click", ()=>{ adjustQty(b.dataset.id,1); }));
  itemsEl.querySelectorAll(".dec").forEach(b=>b.addEventListener("click", ()=>{ adjustQty(b.dataset.id,-1); }));
  itemsEl.querySelectorAll(".remove").forEach(b=>b.addEventListener("click", ()=>{ removeItem(b.dataset.id); }));
  localStorage.setItem("hinna_cart", JSON.stringify(CART));
}

function adjustQty(id, delta){
  const it = CART.find(i=>i.id===id); if(!it) return;
  it.qty = Math.max(1, it.qty + delta);
  saveCart();
}
function removeItem(id){ CART = CART.filter(i=>i.id!==id); saveCart(); }

/* --------------------
   Checkout flows
   -------------------- */
document.getElementById("checkoutMock").addEventListener("click", ()=>{ mockCheckout(); });
document.getElementById("checkoutReal").addEventListener("click", ()=>{ startRealCheckout(); });

function mockCheckout(){
  if(CART.length===0){ alert("Your cart is empty"); return; }
  const items = CART.map(i=>`${i.qty}√ó ${i.title}`).join("\n");
  const total = CART.reduce((s,i)=>s+i.qty*i.price,0).toFixed(2);
  if(confirm(`MOCK CHECKOUT\n\nItems:\n${items}\n\nTotal: $${total}\n\nSimulate successful payment?`)) {
    CART = []; localStorage.setItem("hinna_cart","[]"); updateCartUI(); alert("Payment simulated. Thank you!");
    closeDrawer();
  }
}

async function startRealCheckout(){
  if(CART.length===0){ alert("Your cart is empty"); return; }
  const line_items = CART.map(i=>({ price_data:{
      currency: "usd",
      product_data: { name: i.title, images: [i.img] },
      unit_amount: Math.round(i.price * 100)
    }, quantity: i.qty }));
  try{
    const res = await fetch('/create-checkout-session', {
      method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ line_items })
    });
    if(!res.ok) throw new Error('No server or server error');
    const { url } = await res.json();
    if(url){ window.location = url; } else throw new Error('Invalid response from server');
  } catch(err){
    console.warn("Real checkout failed:", err);
    if(confirm("Real checkout server not available. Do you want to run a mock checkout instead?")) mockCheckout();
  }
}

/* --------------------
   Init on load
   -------------------- */
document.addEventListener('DOMContentLoaded', ()=>{
  CART = JSON.parse(localStorage.getItem("hinna_cart") || "[]");
  updateCartUI();

  // Clicking product images opens modal (keyboard/tap friendly)
  document.querySelectorAll('.product-photo img').forEach((img, idx)=>{
    img.addEventListener('click', ()=> openModal(PRODUCTS[idx].id));
  });
});

/* Smooth scroll helper */
function scrollToSection(evt, id){
  if(evt) evt.preventDefault();
  const el = document.getElementById(id);
  if(!el) return;
  el.scrollIntoView({behavior:'smooth',block:'start'});
}
</script>
</body>
</html>
